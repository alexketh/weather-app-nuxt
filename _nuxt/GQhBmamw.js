import{t as r,v as u,x as e,J as D,g as z,z as S,_ as C,K as W,i as j,y as m,L as t,M as E,N as R,r as v,E as V,o as B,O as L,P as b,Q as $,R as K,S as N,T as H,q as J}from"./ByilWSJ7.js";const O={class:"inline-flex rounded-lg border border-gray-200"},Q={__name:"UnitToggle",props:{modelValue:{type:String,required:!0,validator:d=>["celsius","fahrenheit"].includes(d)}},emits:["update:modelValue"],setup(d,{emit:i}){const l=i,n=h=>{l("update:modelValue",h)};return(h,o)=>(r(),u("div",O,[e("button",{onClick:o[0]||(o[0]=p=>n("celsius")),class:D(["px-4 py-2 text-sm rounded-l-lg",d.modelValue==="celsius"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"])}," °C ",2),e("button",{onClick:o[1]||(o[1]=p=>n("fahrenheit")),class:D(["px-4 py-2 text-sm rounded-r-lg",d.modelValue==="fahrenheit"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"])}," °F ",2)]))}},G={class:"animate-spin"},X={__name:"LoadingSpinner",props:{size:{type:String,default:"medium",validator:d=>["small","medium","large"].includes(d)}},setup(d){return(i,l)=>{const n=z("SpinnerIcon");return r(),u("div",G,[S(n,{size:d.size},null,8,["size"])])}}},Y={},Z={class:"animate-pulse"};function ee(d,i){return r(),u("div",Z,i[0]||(i[0]=[W('<div class="h-8 bg-gray-200 rounded w-48 mx-auto mb-4"></div><div class="h-12 bg-gray-200 rounded w-32 mx-auto mb-4"></div><div class="h-6 bg-gray-200 rounded w-40 mx-auto mb-6"></div><div class="grid grid-cols-2 gap-4"><div class="h-20 bg-gray-200 rounded"></div><div class="h-20 bg-gray-200 rounded"></div></div>',4)]))}const te=C(Y,[["render",ee]]),se={class:"weather-icon"},ae={__name:"WeatherIcon",props:{condition:{type:String,required:!0},isDay:{type:Boolean,default:!0}},setup(d){const i=d,l={Clear:i.isDay?"☀️":"🌙",Clouds:"☁️",Rain:"🌧️",Drizzle:"🌦️",Thunderstorm:"⛈️",Snow:"🌨️",Mist:"🌫️",Smoke:"🌫️",Haze:"🌫️",Dust:"🌫️",Fog:"🌫️",Sand:"🌫️",Ash:"🌫️",Squall:"💨",Tornado:"🌪️"},n=j(()=>l[i.condition]||"❓");return(h,o)=>(r(),u("div",se,m(t(n)),1))}},oe=C(ae,[["__scopeId","data-v-113dcef8"]]),ne={},re={class:"grid grid-cols-1 md:grid-cols-5 gap-4"};function ie(d,i){return r(),u("div",re,[(r(),u(E,null,R(5,l=>e("div",{key:l,class:"animate-pulse"},i[0]||(i[0]=[e("div",{class:"h-6 bg-gray-200 rounded mb-3"},null,-1),e("div",{class:"h-16 w-16 bg-gray-200 rounded-full mx-auto mb-3"},null,-1),e("div",{class:"h-6 bg-gray-200 rounded w-20 mx-auto"},null,-1)]))),64))])}const le=C(ne,[["render",ie]]),ce={class:"max-w-4xl mx-auto p-4"},de={class:"grid gap-6"},ue={class:"bg-white rounded-lg shadow-md p-6"},pe={class:"flex justify-between items-center mb-6"},me=["disabled"],ge={key:0,class:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},he={class:"flex gap-2"},_e=["disabled"],fe=["disabled"],ye={key:2,class:"text-center"},ve={class:"text-2xl font-bold mb-4"},be={class:"flex items-center justify-center gap-4 mb-4"},we={class:"text-4xl"},xe={class:"text-gray-600 capitalize mb-6"},ke={class:"grid grid-cols-2 gap-4"},$e={class:"bg-gray-50 p-3 rounded"},Se={class:"font-bold"},Ce={class:"bg-gray-50 p-3 rounded"},De={class:"font-bold"},Ie={key:0,class:"bg-white rounded-lg shadow-md p-6"},Ve={key:1,class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Le={class:"font-semibold mb-2"},ze={class:"text-lg font-bold mb-1"},Ee={class:"text-sm text-gray-600 capitalize"},Re={__name:"index",setup(d){const i=J(),l=v(""),n=v(null),h=v(null),o=v(null),p=v(!1),w=v(!1),y=v("fahrenheit"),U=s=>new Date(s*1e3).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),M=s=>s*9/5+32,I=s=>{const a=y.value==="celsius"?s:M(s);return`${Math.round(a)}°${y.value==="celsius"?"C":"F"}`},P=(s,a)=>{const c=Math.floor(Date.now()/1e3);return c>=s&&c<=a};async function T(s,a){try{const c=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${s}&lon=${a}&units=metric&appid=${i.public.weatherApiKey}`),g=await c.json();if(!c.ok)throw new Error(g.message);n.value=g;const f=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${s}&lon=${a}&units=metric&appid=${i.public.weatherApiKey}`),x=await f.json();if(!f.ok)throw new Error(x.message);h.value=x.list.filter(k=>k.dt_txt.includes("12:00:00")).slice(0,5)}catch(c){o.value=c.message||"Error fetching weather data"}}async function q(){o.value=null,w.value=!0;try{const s=await new Promise((g,f)=>{navigator.geolocation.getCurrentPosition(g,f)}),{latitude:a,longitude:c}=s.coords;await T(a,c)}catch{o.value="Unable to get your location. Please check your browser settings."}finally{w.value=!1}}async function A(){if(!l.value.trim()){o.value="Please enter a city name";return}p.value=!0,o.value=null,n.value=null,h.value=null;try{const s=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(l.value)}&units=metric&appid=${i.public.weatherApiKey}`),a=await s.json();if(!s.ok)throw new Error(a.message||"Error fetching weather data");n.value=a;const c=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(l.value)}&units=metric&appid=${i.public.weatherApiKey}`),g=await c.json();if(!c.ok)throw new Error(g.message||"Error fetching forecast data");h.value=g.list.filter(f=>f.dt_txt.includes("12:00:00")).slice(0,5)}catch(s){switch(s.message){case"city not found":o.value="City not found. Please check the spelling and try again.";break;case"invalid api key":o.value="Invalid API key. Please check your configuration.";break;case"too many requests":o.value="Too many requests. Please try again later.";break;default:o.value=s.message||"An error occurred while fetching weather data."}}finally{p.value=!1}}return V(l,()=>{o.value&&(o.value=null)}),V(y,s=>{localStorage.setItem("preferred-temp-unit",s)}),B(()=>{const s=localStorage.getItem("preferred-temp-unit")||"fahrenheit";y.value=s}),(s,a)=>{const c=Q,g=X,f=z("LocationIcon"),x=te,k=oe,F=le;return r(),u("div",ce,[e("div",de,[e("div",ue,[e("div",pe,[S(c,{modelValue:t(y),"onUpdate:modelValue":a[0]||(a[0]=_=>L(y)?y.value=_:null)},null,8,["modelValue"]),e("button",{onClick:q,class:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",disabled:t(w)},[t(w)?(r(),b(g,{key:0})):(r(),b(f,{key:1})),a[2]||(a[2]=e("span",null,"My Location",-1))],8,me)]),t(o)?(r(),u("div",ge,[e("p",null,m(t(o)),1)])):$("",!0),e("form",{onSubmit:K(A,["prevent"]),class:"mb-6"},[e("div",he,[N(e("input",{"onUpdate:modelValue":a[1]||(a[1]=_=>L(l)?l.value=_:null),type:"text",placeholder:"Enter city name",class:D(["flex-1 p-2 border rounded",{"border-red-500":t(o)}]),disabled:t(p)},null,10,_e),[[H,t(l)]]),e("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",disabled:t(p)},[t(p)?(r(),b(g,{key:0})):$("",!0),e("span",null,m(t(p)?"Searching...":"Search"),1)],8,fe)])],32),t(p)?(r(),b(x,{key:1})):t(n)?(r(),u("div",ye,[e("h2",ve,m(t(n).name),1),e("div",be,[S(k,{condition:t(n).weather[0].main,"is-day":P(t(n).sys.sunrise,t(n).sys.sunset),class:"w-16 h-16"},null,8,["condition","is-day"]),e("p",we,m(I(t(n).main.temp)),1)]),e("p",xe,m(t(n).weather[0].description),1),e("div",ke,[e("div",$e,[a[3]||(a[3]=e("p",{class:"text-gray-600"},"Humidity",-1)),e("p",Se,m(t(n).main.humidity)+"%",1)]),e("div",Ce,[a[4]||(a[4]=e("p",{class:"text-gray-600"},"Wind Speed",-1)),e("p",De,m(t(n).wind.speed)+" m/s",1)])])])):$("",!0)]),t(h)||t(p)?(r(),u("div",Ie,[a[5]||(a[5]=e("h3",{class:"text-xl font-bold mb-4"},"5-Day Forecast",-1)),t(p)?(r(),b(F,{key:0})):(r(),u("div",Ve,[(r(!0),u(E,null,R(t(h),_=>(r(),u("div",{key:_.dt,class:"bg-gray-50 p-4 rounded-lg text-center"},[e("p",Le,m(U(_.dt)),1),S(k,{condition:_.weather[0].main,"is-day":!0,class:"w-12 h-12 mx-auto mb-2"},null,8,["condition"]),e("p",ze,m(I(_.main.temp)),1),e("p",Ee,m(_.weather[0].description),1)]))),128))]))])):$("",!0)])])}}},Me=C(Re,[["__scopeId","data-v-1e169e37"]]);export{Me as default};
